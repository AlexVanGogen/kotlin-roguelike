# Архитектурное описание Roguelike

## Общие сведения о системе

Игра представляет собой случайно сгенерированную карту подземелья с монстрами и предметами. Карта представляет собой таблицу из символов, каждый символ обозначает либо тип местности (земля/стена), либо предмет, либо существо (игрока или монстра) Игрок `@` способен перемещаться по карте, сражаться с монстрами и собирать предметы. Игрок существует в пределах карты и не может из нее выбраться. Цель игрока -- собрать все специальные предметы.

У игрока есть инвентарь ограниченной вместимости, где он может хранить собранные предметы.

Монстры могут атаковать игрока, а игрок, в свою очередь, может атаковать монстров. Игра продолжается до тех пор, пока игрок либо не соберет все нужные предметы, либо не умрет от атак монстров.

В подземелье также присутствуют стены, через которые нельзя пройти без наличия определенного предмета в инвентаре.

## Описание типичного пользователя

Пользователь Тигран входит в игру и видит стартовый экран, с которого он может перейти на карту по нажатию кнопки `Enter`. По карте он перемещается при помощи стрелок. При встрече с монстром (монстр находится на соседней позиции) пользователь имеет возможность его атаковать, для этого он перемещается в ту сторону, где сейчас находится монстр.

Тигран видит на карте что-то необычное и подходит ближе. Это предмет, и он может его взять, встав на позицию предмета и нажав `g`. Если в инвентаре есть место, предмет исчезнет с карты и будет храниться только у игрока.

Теперь Тигран хочет посмотреть, а что он вообще насобирал за игру. Он нажимает на `e` и рядом с картой видит свой инвентарь. Каждому предмету соответствует своя буква. Тигран нажимает на клавишу с буквой, соответствующей некоторому предмету, и этот предмет выбрасывается с инвентаря в игровое пространство. Выйти обратно в игровое пространство можно по нажатию клавиши `Esc`.

Пролистывая список предметов в инвентаре, Тигран видит, что некоторые предметы, скорее всего, являются предметами экипировки и их можно надеть на персонажа. Экипировку можно посмотреть в отдельном окне, нажав в игре `w`. Тигран нажимает `w` и видит список экипировки. Он видит, что он собрал, и что из собранного сейчас надето на персонаже. Здесь также каждому предмету соответствует своя буква. После нажатия на клавишу с буквой, соответствующей предмету, этот предмет надевается на персонажа. Если у персонажа уже был надет предмет похожего назначения (например, броня), то предыдущая броня автоматически снимается. Выйти обратно в игровое пространство можно по нажатию клавиши `Esc`.

Также Тигран хочет контролировать статы своего персонажа. Он смотрит на специальные показатели (HP/Atk/Def), постоянно висящие рядом с игровым пространством. Это позволяет оценить, как скоро персонаж может умереть, а также какая экипировка лучше.

Рядом со статами отображается, какие особые предметы Тигран уже собрал. Так он может контролировать, насколько он далек от победы.

## Диаграмма классов

![alt text](https://github.com/AlexVanGogen/kotlin-roguelike/edit/master/docs/ClassDiagram.png "Class diagram")

## Диаграммы последовательностей и конечных автоматов

![alt text](https://github.com/AlexVanGogen/kotlin-roguelike/edit/master/docs/SequenceDiagram.png "Sequence diagram")

![alt text](https://github.com/AlexVanGogen/kotlin-roguelike/edit/master/docs/ActivityDiagram.png "Finite automata diagram")
